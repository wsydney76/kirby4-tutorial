{#
Show an image.
This can get really complex in a real world application,
especially when using a third party plugin like imager-x
with a lot of options, or when delivering different formats.

However, images should always be output via a macro and not by using 'image.img()'

TODO: This is for now a basic implemention without handling responsive images
    see https://getkirby.com/docs/cookbook/performance/responsive-images
#}


{% macro img(image, params = {}) %}

    {% set params = {
        mode: 'crop',
        class: '',
    } | merge(params) %}

    {% if params.mode == 'crop' and params.transform.height is defined %}
        {% set transformedImage = image.crop(params.transform.width, params.transform.height) %}
    {% elseif params.transform.width is defined %}
        {% set transformedImage = image.resize(params.transform.width) %}
    {% else %}
        {% set transformedImage = image %}
    {% endif %}

    
    <img {{ attr({
        alt: image.alt|e('html_attr'),
        class: params.class,
        src: transformedImage.url,
        width: transformedImage.width,
        height: transformedImage.height,
    }) }}>

{% endmacro %}

{#
Show copyright info in the bottom right corner of an image.
This must be called within a figure tag with position: relative
#}
{% macro copyrightOverlay(copyright) %}
    {% if copyright.isNotEmpty %}
        <figcaption class="absolute bottom-0 right-0 px-2 py-1 bg-black/50 text-white text-sm">
            {{ 'Photo'|t }}: {{ copyright }}
        </figcaption>
    {% endif %}
{% endmacro %}

